<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Workshop 3 Data Wrangling and Data Summarising | Advanced Data Skills, Open Science and Reproducibility 2025/26</title>
  <meta name="description" content="Workshop 3 Data Wrangling and Data Summarising | Advanced Data Skills, Open Science and Reproducibility 2025/26" />
  <meta name="generator" content="bookdown 0.36 and GitBook 2.6.7" />

  <meta property="og:title" content="Workshop 3 Data Wrangling and Data Summarising | Advanced Data Skills, Open Science and Reproducibility 2025/26" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Workshop 3 Data Wrangling and Data Summarising | Advanced Data Skills, Open Science and Reproducibility 2025/26" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-and-rstudio.html"/>
<link rel="next" href="data-visualisation.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">PCHN63101</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="open-science.html"><a href="open-science.html"><i class="fa fa-check"></i><b>1</b> Open Science</a>
<ul>
<li class="chapter" data-level="1.1" data-path="open-science.html"><a href="open-science.html#open-research-and-reproducibility"><i class="fa fa-check"></i><b>1.1</b> Open Research and Reproducibility</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="open-science.html"><a href="open-science.html#how-to-do-reproducible-research"><i class="fa fa-check"></i><b>1.1.1</b> How to do Reproducible Research</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="open-science.html"><a href="open-science.html#experimental-power"><i class="fa fa-check"></i><b>1.2</b> Experimental Power</a></li>
<li class="chapter" data-level="1.3" data-path="open-science.html"><a href="open-science.html#open-source-software"><i class="fa fa-check"></i><b>1.3</b> Open Source Software</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="open-science.html"><a href="open-science.html#statistical-and-scientific-computing"><i class="fa fa-check"></i><b>1.3.1</b> Statistical and Scientific Computing</a></li>
<li class="chapter" data-level="1.3.2" data-path="open-science.html"><a href="open-science.html#document-creation"><i class="fa fa-check"></i><b>1.3.2</b> Document Creation</a></li>
<li class="chapter" data-level="1.3.3" data-path="open-science.html"><a href="open-science.html#building-experiments"><i class="fa fa-check"></i><b>1.3.3</b> Building Experiments</a></li>
<li class="chapter" data-level="1.3.4" data-path="open-science.html"><a href="open-science.html#linux"><i class="fa fa-check"></i><b>1.3.4</b> Linux</a></li>
<li class="chapter" data-level="1.3.5" data-path="open-science.html"><a href="open-science.html#more-reading"><i class="fa fa-check"></i><b>1.3.5</b> More Reading</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html"><i class="fa fa-check"></i><b>2</b> R and RStudio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#why-r"><i class="fa fa-check"></i><b>2.1</b> Why R?</a></li>
<li class="chapter" data-level="2.2" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#getting-started"><i class="fa fa-check"></i><b>2.2</b> Getting Started</a></li>
<li class="chapter" data-level="2.3" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#keeping-things-organised"><i class="fa fa-check"></i><b>2.3</b> Keeping Things Organised</a></li>
<li class="chapter" data-level="2.4" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#good-coding-style"><i class="fa fa-check"></i><b>2.4</b> Good Coding Style</a></li>
<li class="chapter" data-level="2.5" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#your-first-r-script"><i class="fa fa-check"></i><b>2.5</b> Your First R Script</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-wrangling-and-data-summarising.html"><a href="data-wrangling-and-data-summarising.html"><i class="fa fa-check"></i><b>3</b> Data Wrangling and Data Summarising</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-wrangling-and-data-summarising.html"><a href="data-wrangling-and-data-summarising.html#wrangling-your-data"><i class="fa fa-check"></i><b>3.1</b> Wrangling your data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-wrangling-and-data-summarising.html"><a href="data-wrangling-and-data-summarising.html#loading-the-tidyverse"><i class="fa fa-check"></i><b>3.1.1</b> Loading the Tidyverse</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-wrangling-and-data-summarising.html"><a href="data-wrangling-and-data-summarising.html#using-head-and-str"><i class="fa fa-check"></i><b>3.1.2</b> Using <code>head()</code> and <code>str()</code></a></li>
<li class="chapter" data-level="3.1.3" data-path="data-wrangling-and-data-summarising.html"><a href="data-wrangling-and-data-summarising.html#use-select-to-select-columns"><i class="fa fa-check"></i><b>3.1.3</b> Use <code>select()</code> to select columns</a></li>
<li class="chapter" data-level="3.1.4" data-path="data-wrangling-and-data-summarising.html"><a href="data-wrangling-and-data-summarising.html#use-filter-to-select-rows"><i class="fa fa-check"></i><b>3.1.4</b> Use <code>filter()</code> to select rows</a></li>
<li class="chapter" data-level="3.1.5" data-path="data-wrangling-and-data-summarising.html"><a href="data-wrangling-and-data-summarising.html#the-pipe"><i class="fa fa-check"></i><b>3.1.5</b> The pipe <code>%&gt;%</code></a></li>
<li class="chapter" data-level="3.1.6" data-path="data-wrangling-and-data-summarising.html"><a href="data-wrangling-and-data-summarising.html#tidying-up-a-dataset"><i class="fa fa-check"></i><b>3.1.6</b> Tidying up a dataset</a></li>
<li class="chapter" data-level="3.1.7" data-path="data-wrangling-and-data-summarising.html"><a href="data-wrangling-and-data-summarising.html#joining-two-datasets"><i class="fa fa-check"></i><b>3.1.7</b> Joining Two Datasets</a></li>
<li class="chapter" data-level="3.1.8" data-path="data-wrangling-and-data-summarising.html"><a href="data-wrangling-and-data-summarising.html#your-challenge-complete-this-before-the-in-person-session"><i class="fa fa-check"></i><b>3.1.8</b> Your challenge (complete this before the in-person session)</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-wrangling-and-data-summarising.html"><a href="data-wrangling-and-data-summarising.html#summarising-your-data"><i class="fa fa-check"></i><b>3.2</b> Summarising your data</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-wrangling-and-data-summarising.html"><a href="data-wrangling-and-data-summarising.html#using-group_by-and-summarise"><i class="fa fa-check"></i><b>3.2.1</b> Using <code>group_by()</code> and <code>summarise()</code></a></li>
<li class="chapter" data-level="3.2.2" data-path="data-wrangling-and-data-summarising.html"><a href="data-wrangling-and-data-summarising.html#adding-columns-using-mutate"><i class="fa fa-check"></i><b>3.2.2</b> Adding columns using <code>mutate()</code></a></li>
<li class="chapter" data-level="3.2.3" data-path="data-wrangling-and-data-summarising.html"><a href="data-wrangling-and-data-summarising.html#your-challenge-do-this-during-the-in-person-session"><i class="fa fa-check"></i><b>3.2.3</b> Your challenge (do this during the in-person session)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-visualisation.html"><a href="data-visualisation.html"><i class="fa fa-check"></i><b>4</b> Data Visualisation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-visualisation.html"><a href="data-visualisation.html#the-basics-of-ggplot2"><i class="fa fa-check"></i><b>4.1</b> The Basics of ggplot2</a></li>
<li class="chapter" data-level="4.2" data-path="data-visualisation.html"><a href="data-visualisation.html#your-first-visualisation"><i class="fa fa-check"></i><b>4.2</b> Your First Visualisation</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-visualisation.html"><a href="data-visualisation.html#improving-the-plot"><i class="fa fa-check"></i><b>4.2.1</b> Improving the Plot</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-visualisation.html"><a href="data-visualisation.html#adding-summary-statistics"><i class="fa fa-check"></i><b>4.2.2</b> Adding Summary Statistics</a></li>
<li class="chapter" data-level="4.2.3" data-path="data-visualisation.html"><a href="data-visualisation.html#the-finished-plot"><i class="fa fa-check"></i><b>4.2.3</b> The Finished(?) Plot</a></li>
<li class="chapter" data-level="4.2.4" data-path="data-visualisation.html"><a href="data-visualisation.html#using-facet_wrap"><i class="fa fa-check"></i><b>4.2.4</b> Using <code>facet_wrap()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-visualisation.html"><a href="data-visualisation.html#scatterplots"><i class="fa fa-check"></i><b>4.3</b> Scatterplots</a></li>
<li class="chapter" data-level="4.4" data-path="data-visualisation.html"><a href="data-visualisation.html#plotting-histograms"><i class="fa fa-check"></i><b>4.4</b> Plotting Histograms</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data-visualisation.html"><a href="data-visualisation.html#the-ggridges-package"><i class="fa fa-check"></i><b>4.4.1</b> The <code>ggridges</code> Package</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-visualisation.html"><a href="data-visualisation.html#the-nhanes-dataset"><i class="fa fa-check"></i><b>4.5</b> The NHANES Dataset</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="data-visualisation.html"><a href="data-visualisation.html#tidying-the-data"><i class="fa fa-check"></i><b>4.5.1</b> Tidying the Data</a></li>
<li class="chapter" data-level="4.5.2" data-path="data-visualisation.html"><a href="data-visualisation.html#plotting-a-histogram"><i class="fa fa-check"></i><b>4.5.2</b> Plotting a Histogram</a></li>
<li class="chapter" data-level="4.5.3" data-path="data-visualisation.html"><a href="data-visualisation.html#summary-statistics"><i class="fa fa-check"></i><b>4.5.3</b> Summary Statistics</a></li>
<li class="chapter" data-level="4.5.4" data-path="data-visualisation.html"><a href="data-visualisation.html#geom_violin"><i class="fa fa-check"></i><b>4.5.4</b> <code>geom_violin()</code></a></li>
<li class="chapter" data-level="4.5.5" data-path="data-visualisation.html"><a href="data-visualisation.html#plotting-interaction-effects"><i class="fa fa-check"></i><b>4.5.5</b> Plotting Interaction Effects</a></li>
<li class="chapter" data-level="4.5.6" data-path="data-visualisation.html"><a href="data-visualisation.html#histograms-with-facet_wrap"><i class="fa fa-check"></i><b>4.5.6</b> Histograms with <code>facet_wrap()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="data-visualisation.html"><a href="data-visualisation.html#your-challenge-do-this-during-the-in-person-session-1"><i class="fa fa-check"></i><b>4.6</b> Your Challenge (do this during the in-person session)</a></li>
<li class="chapter" data-level="4.7" data-path="data-visualisation.html"><a href="data-visualisation.html#additional-resources"><i class="fa fa-check"></i><b>4.7</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>5</b> R Markdown</a>
<ul>
<li class="chapter" data-level="5.1" data-path="r-markdown.html"><a href="r-markdown.html#overview"><i class="fa fa-check"></i><b>5.1</b> Overview</a></li>
<li class="chapter" data-level="5.2" data-path="r-markdown.html"><a href="r-markdown.html#your-challenge-do-this-during-the-in-person-session-2"><i class="fa fa-check"></i><b>5.2</b> Your Challenge (do this during the in-person session)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="technical-details-and-credits.html"><a href="technical-details-and-credits.html"><i class="fa fa-check"></i>Technical Details and Credits</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Advanced Data Skills, Open Science and Reproducibility 2025/26</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-wrangling-and-data-summarising" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Workshop 3</span> Data Wrangling and Data Summarising<a href="data-wrangling-and-data-summarising.html#data-wrangling-and-data-summarising" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this workshop we shall take our first look at some key tools in the <a href="https://www.tidyverse.org">Tidyverse</a> that will allow us to wrangle and tidy our data so that it’s in the format that we need in order to visualize and model it. By making our data wrangling reproducible (i.e., by coding it in R), we can easily re-run this stage of our analysis pipeline as new data gets added. Reproducibility of the data wrangling stage is a key part of the analysis process and often gets overlooked in terms of needing to ensure it is reproducible.</p>
<p>The Tidyverse is a collection of packages that all ‘play nicely’ with each other. They are based on a common philosophy where data are represented in rectangular format (i.e., with rows and columns). These rectangular structures are known in the Tidyverse as <code>tibbles</code>. If you’re interested, you can read more about <code>tibbles</code> in the R4DS book <a href="https://r4ds.had.co.nz/tibbles.html">here</a>.</p>
<div id="wrangling-your-data" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Wrangling your data<a href="data-wrangling-and-data-summarising.html#wrangling-your-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Have a look at the following video where I walk you through this worksheet. Then I want you to work through the content by writing (and running) the script on your own machine.</p>
<p>  </p>
<center>
<iframe width="560" height="315" src="https://youtube.com/embed/Vs2RYqX1qiM" frameborder="0" allowfullscreen>
</iframe>
</center>
<p>  </p>
<div id="loading-the-tidyverse" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Loading the Tidyverse<a href="data-wrangling-and-data-summarising.html#loading-the-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s take our first look at data wrangling. We are going to start with a dataset that comes with the Tidyverse. The dataset is called <code>mpg</code> and comprises fuel economy data from 1999 to 2008 for 38 popular models of cars in the US.</p>
<p>First, we need to load the <code>tidyverse</code> library with the following:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data-wrangling-and-data-summarising.html#cb2-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>If you run this line without having first installed the Tidyverse on your computer, you will encounter an error. R packages only need to be installed once, so if you want to load one into your library for the first time, you need to install it with <code>install.packages(*packagename*)</code>.</p>
<p>For the <code>tidyverse</code> we need to install it with:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data-wrangling-and-data-summarising.html#cb3-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>Once you have installed the <code>tidyverse</code>, you can then load it into your llbrary with the <code>library()</code> function. You only ever need to install a package once on your machine (unless you have updated R or you want to install the most up-to-date version of a particular package). When you are writing your R scripts, you never want to have the <code>install.packages()</code> function in the body of the script as if someone else were to run your script, this would update packages on their computer (which they might not want).</p>
<div id="the-mpg-dataset" class="section level4 unnumbered hasAnchor">
<h4>The <code>mpg</code> dataset<a href="data-wrangling-and-data-summarising.html#the-mpg-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>mpg</code> dataset is loaded as part of the Tidyverse. In the help file, which you can access by typing <code>help(mpg)</code> or <code>?mpg</code> we see the following:</p>
<p>Description This dataset contains a subset of the fuel economy data that the EPA makes available on <a href="http://fueleconomy.gov" class="uri">http://fueleconomy.gov</a>. It contains only models which had a new release every year between 1999 and 2008 - this was used as a proxy for the popularity of the car.</p>
<p>A data frame with 234 rows and 11 variables.</p>
<p>manufacturer - manufacturer model - model name displ - engine displacement, in litres year - year of manufacture cyl - number of cylinders trans -type of transmission drv -f = front-wheel drive, r = rear wheel drive, 4 = 4wd cty - city miles per gallon hwy - highway miles per gallon fl - fuel type class - “type” of car</p>
<p>Note you can also use help to inspect functions, for example: Typing <code>?sd</code> will show you the documentation for R’s Standard Deviation function.</p>
</div>
</div>
<div id="using-head-and-str" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Using <code>head()</code> and <code>str()</code><a href="data-wrangling-and-data-summarising.html#using-head-and-str" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can explore the <code>mpg</code> dataset that is loaded with the Tidyverse in a number of ways. If we want to look at the first 6 lines of the dataset, we can use the <code>head()</code> function.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data-wrangling-and-data-summarising.html#cb4-1" tabindex="-1"></a><span class="fu">head</span>(mpg)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 11
##   manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class  
##   &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
## 1 audi         a4      1.8  1999     4 auto(l5)   f        18    29 p     compact
## 2 audi         a4      1.8  1999     4 manual(m5) f        21    29 p     compact
## 3 audi         a4      2    2008     4 manual(m6) f        20    31 p     compact
## 4 audi         a4      2    2008     4 auto(av)   f        21    30 p     compact
## 5 audi         a4      2.8  1999     6 auto(l5)   f        16    26 p     compact
## 6 audi         a4      2.8  1999     6 manual(m5) f        18    26 p     compact</code></pre>
<p>We see that it is a tibble - or a rectangular data frame - made up of rows and columns. This is <code>tidy</code> format where each observation corresponds to a row. Most of the analyses we will run in R involve <code>tidy</code> data. Within the Tidyverse, the <code>tibble</code> is the standard way to represent data. You’ll spend a lot of time tidying and wrangling your data to get it into this format! By doing this in R using a script that you write, you are making this key stage <em>reproducible</em>. You can run the script again on an updated or different dataset - thus likely saving you lots of time!</p>
<p>We can also ask for information about the structure of our dataset with <code>str()</code>. This will tell us about the columns, what type of variable each is, the number of rows etc.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data-wrangling-and-data-summarising.html#cb6-1" tabindex="-1"></a><span class="fu">str</span>(mpg)</span></code></pre></div>
<pre><code>## tibble [234 × 11] (S3: tbl_df/tbl/data.frame)
##  $ manufacturer: chr [1:234] &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; ...
##  $ model       : chr [1:234] &quot;a4&quot; &quot;a4&quot; &quot;a4&quot; &quot;a4&quot; ...
##  $ displ       : num [1:234] 1.8 1.8 2 2 2.8 2.8 3.1 1.8 1.8 2 ...
##  $ year        : int [1:234] 1999 1999 2008 2008 1999 1999 2008 1999 1999 2008 ...
##  $ cyl         : int [1:234] 4 4 4 4 6 6 6 4 4 4 ...
##  $ trans       : chr [1:234] &quot;auto(l5)&quot; &quot;manual(m5)&quot; &quot;manual(m6)&quot; &quot;auto(av)&quot; ...
##  $ drv         : chr [1:234] &quot;f&quot; &quot;f&quot; &quot;f&quot; &quot;f&quot; ...
##  $ cty         : int [1:234] 18 21 20 21 16 18 18 18 16 20 ...
##  $ hwy         : int [1:234] 29 29 31 30 26 26 27 26 25 28 ...
##  $ fl          : chr [1:234] &quot;p&quot; &quot;p&quot; &quot;p&quot; &quot;p&quot; ...
##  $ class       : chr [1:234] &quot;compact&quot; &quot;compact&quot; &quot;compact&quot; &quot;compact&quot; ...</code></pre>
</div>
<div id="use-select-to-select-columns" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Use <code>select()</code> to select columns<a href="data-wrangling-and-data-summarising.html#use-select-to-select-columns" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If we want to, we could just select one of the columns using the <code>select()</code> function. Below we are just selecing the column entitled <code>manufacturer</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data-wrangling-and-data-summarising.html#cb8-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="data-wrangling-and-data-summarising.html#cb8-2" tabindex="-1"></a>  <span class="fu">select</span>(manufacturer)</span></code></pre></div>
<pre><code>## # A tibble: 234 × 1
##    manufacturer
##    &lt;chr&gt;       
##  1 audi        
##  2 audi        
##  3 audi        
##  4 audi        
##  5 audi        
##  6 audi        
##  7 audi        
##  8 audi        
##  9 audi        
## 10 audi        
## # ℹ 224 more rows</code></pre>
<p>Related to the <code>select()</code> function is <code>rename()</code>. It does exactly what you think it might; it renames a column.</p>
<p>We can also look at the different car manufacturers in the dataset by using the <code>distinct()</code> function. This gives us the unique manufacturer names. This function can be quite handy if you want to check a dataset for duplicates of (e.g.) participant IDs.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data-wrangling-and-data-summarising.html#cb10-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="data-wrangling-and-data-summarising.html#cb10-2" tabindex="-1"></a>  <span class="fu">distinct</span>(manufacturer)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 1
##    manufacturer
##    &lt;chr&gt;       
##  1 audi        
##  2 chevrolet   
##  3 dodge       
##  4 ford        
##  5 honda       
##  6 hyundai     
##  7 jeep        
##  8 land rover  
##  9 lincoln     
## 10 mercury     
## 11 nissan      
## 12 pontiac     
## 13 subaru      
## 14 toyota      
## 15 volkswagen</code></pre>
</div>
<div id="use-filter-to-select-rows" class="section level3 hasAnchor" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> Use <code>filter()</code> to select rows<a href="data-wrangling-and-data-summarising.html#use-filter-to-select-rows" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes we might want to select only a subset of rows in our dataset. We can do that using the <code>filter()</code> function. For example, here we filter our dataset to include only cars made by ‘honda’.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data-wrangling-and-data-summarising.html#cb12-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="data-wrangling-and-data-summarising.html#cb12-2" tabindex="-1"></a>  <span class="fu">filter</span>(manufacturer <span class="sc">==</span> <span class="st">&quot;honda&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 9 × 11
##   manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class     
##   &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;     
## 1 honda        civic   1.6  1999     4 manual(m5) f        28    33 r     subcompact
## 2 honda        civic   1.6  1999     4 auto(l4)   f        24    32 r     subcompact
## 3 honda        civic   1.6  1999     4 manual(m5) f        25    32 r     subcompact
## 4 honda        civic   1.6  1999     4 manual(m5) f        23    29 p     subcompact
## 5 honda        civic   1.6  1999     4 auto(l4)   f        24    32 r     subcompact
## 6 honda        civic   1.8  2008     4 manual(m5) f        26    34 r     subcompact
## 7 honda        civic   1.8  2008     4 auto(l5)   f        25    36 r     subcompact
## 8 honda        civic   1.8  2008     4 auto(l5)   f        24    36 c     subcompact
## 9 honda        civic   2    2008     4 manual(m6) f        21    29 p     subcompact</code></pre>
<p>Note, we use the operator <code>==</code> which means ‘is equal to’. This is a logical operator - other logical operators include less than <code>&lt;</code>, greater than <code>&gt;</code>, less than or equal to <code>&lt;=</code>, greater then or equal to <code>&gt;=</code>, and is not equal to <code>!=</code>.</p>
<p>We can also filter using a combination of possibilities via logical OR <code>|</code> or logical AND <code>&amp;</code>. The first code chunk below filters the dataset for cases where the manufacturer is ‘honda’ OR ‘toyota’.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data-wrangling-and-data-summarising.html#cb14-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="data-wrangling-and-data-summarising.html#cb14-2" tabindex="-1"></a>  <span class="fu">filter</span>(manufacturer <span class="sc">==</span> <span class="st">&quot;honda&quot;</span> <span class="sc">|</span> manufacturer <span class="sc">==</span> <span class="st">&quot;toyota&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 43 × 11
##    manufacturer model       displ  year   cyl trans      drv     cty   hwy fl    class     
##    &lt;chr&gt;        &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;     
##  1 honda        civic         1.6  1999     4 manual(m5) f        28    33 r     subcompact
##  2 honda        civic         1.6  1999     4 auto(l4)   f        24    32 r     subcompact
##  3 honda        civic         1.6  1999     4 manual(m5) f        25    32 r     subcompact
##  4 honda        civic         1.6  1999     4 manual(m5) f        23    29 p     subcompact
##  5 honda        civic         1.6  1999     4 auto(l4)   f        24    32 r     subcompact
##  6 honda        civic         1.8  2008     4 manual(m5) f        26    34 r     subcompact
##  7 honda        civic         1.8  2008     4 auto(l5)   f        25    36 r     subcompact
##  8 honda        civic         1.8  2008     4 auto(l5)   f        24    36 c     subcompact
##  9 honda        civic         2    2008     4 manual(m6) f        21    29 p     subcompact
## 10 toyota       4runner 4wd   2.7  1999     4 manual(m5) 4        15    20 r     suv       
## # ℹ 33 more rows</code></pre>
<p>While below we filter for cases where the manufacturer is ‘honda’ and the year of manufacture is ‘1999’.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data-wrangling-and-data-summarising.html#cb16-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="data-wrangling-and-data-summarising.html#cb16-2" tabindex="-1"></a>  <span class="fu">filter</span>(manufacturer <span class="sc">==</span> <span class="st">&quot;honda&quot;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="st">&quot;1999&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 11
##   manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class     
##   &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;     
## 1 honda        civic   1.6  1999     4 manual(m5) f        28    33 r     subcompact
## 2 honda        civic   1.6  1999     4 auto(l4)   f        24    32 r     subcompact
## 3 honda        civic   1.6  1999     4 manual(m5) f        25    32 r     subcompact
## 4 honda        civic   1.6  1999     4 manual(m5) f        23    29 p     subcompact
## 5 honda        civic   1.6  1999     4 auto(l4)   f        24    32 r     subcompact</code></pre>
<div id="combining-functions" class="section level4 unnumbered hasAnchor">
<h4>Combining functions<a href="data-wrangling-and-data-summarising.html#combining-functions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can combine the use of <code>filter()</code> with <code>select()</code> to filter for case where the manufacturer is ‘honda’, the year of manufacture is ‘1999’ and we only want to display these two columns plus those telling us about fuel economy - <code>cty</code> and <code>hwy</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="data-wrangling-and-data-summarising.html#cb18-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="data-wrangling-and-data-summarising.html#cb18-2" tabindex="-1"></a>  <span class="fu">filter</span>(manufacturer <span class="sc">==</span> <span class="st">&quot;honda&quot;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="st">&quot;1999&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="data-wrangling-and-data-summarising.html#cb18-3" tabindex="-1"></a>  <span class="fu">select</span>(manufacturer, year, cty, hwy)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##   manufacturer  year   cty   hwy
##   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 honda         1999    28    33
## 2 honda         1999    24    32
## 3 honda         1999    25    32
## 4 honda         1999    23    29
## 5 honda         1999    24    32</code></pre>
<p>By combining just a few functions, you can imagine that we can build some quite complex data wrangling rules quite straightforwardly.</p>
</div>
</div>
<div id="the-pipe" class="section level3 hasAnchor" number="3.1.5">
<h3><span class="header-section-number">3.1.5</span> The pipe <code>%&gt;%</code><a href="data-wrangling-and-data-summarising.html#the-pipe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Note that in these examples above we used the <code>%&gt;%</code> operator - this is called the pipe and allows us to pass information from one side of the pipe to the other. You can read it out load as ‘and then’. All of the functions (such as <code>select()</code>, <code>filter()</code> etc.) in the Tidyverse are known as verbs, and they describe what they do. The pipe is one of the most commonly used operators in the Tidyverse and allows us to chain together different lines of code - with the output of each line being passed on as input into the next. In this example, the dataset <code>mpg</code> is passed along to the <code>distinct()</code> function where we ask for a list of the distinct (i.e., unique) manufacturers. This output itself is a vector. Vectors are a basic data structure and contain elements of the same type - for example, a bunch of numbers. We can add another line to our piped chain to tell us how many elements are in this vector. We could read this out loud as ‘take the dataset mpg, and then work out the distinct manufacturer names, and then count them’.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data-wrangling-and-data-summarising.html#cb20-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="data-wrangling-and-data-summarising.html#cb20-2" tabindex="-1"></a>  <span class="fu">distinct</span>(manufacturer) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="data-wrangling-and-data-summarising.html#cb20-3" tabindex="-1"></a>  <span class="fu">count</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##       n
##   &lt;int&gt;
## 1    15</code></pre>
</div>
<div id="tidying-up-a-dataset" class="section level3 hasAnchor" number="3.1.6">
<h3><span class="header-section-number">3.1.6</span> Tidying up a dataset<a href="data-wrangling-and-data-summarising.html#tidying-up-a-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="tidying-variable-names" class="section level4 unnumbered hasAnchor">
<h4>Tidying variable names<a href="data-wrangling-and-data-summarising.html#tidying-variable-names" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>At the moment, the car manufacturer names are all in lower case. It would look a lot nicer if they were in title case (i.e., with capitalisation on the first letter of each word). We can use the <code>mutate()</code> function to create a new column - this time, the name of the new column is also the name of the old column that we’re wanting to modify using the function <code>str_to_title()</code>. What this will do is overwrite the column <code>manufacturer</code> and replace it with the new version with the car manufacturer names in title case.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data-wrangling-and-data-summarising.html#cb22-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="data-wrangling-and-data-summarising.html#cb22-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">manufacturer =</span> <span class="fu">str_to_title</span>(manufacturer)) </span></code></pre></div>
<pre><code>## # A tibble: 234 × 11
##    manufacturer model      displ  year   cyl trans      drv     cty   hwy fl    class  
##    &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
##  1 Audi         a4           1.8  1999     4 auto(l5)   f        18    29 p     compact
##  2 Audi         a4           1.8  1999     4 manual(m5) f        21    29 p     compact
##  3 Audi         a4           2    2008     4 manual(m6) f        20    31 p     compact
##  4 Audi         a4           2    2008     4 auto(av)   f        21    30 p     compact
##  5 Audi         a4           2.8  1999     6 auto(l5)   f        16    26 p     compact
##  6 Audi         a4           2.8  1999     6 manual(m5) f        18    26 p     compact
##  7 Audi         a4           3.1  2008     6 auto(av)   f        18    27 p     compact
##  8 Audi         a4 quattro   1.8  1999     4 manual(m5) 4        18    26 p     compact
##  9 Audi         a4 quattro   1.8  1999     4 auto(l5)   4        16    25 p     compact
## 10 Audi         a4 quattro   2    2008     4 manual(m6) 4        20    28 p     compact
## # ℹ 224 more rows</code></pre>
<p>The column <code>model</code> is also lowercase. Let’s make that title case too. We can use the <code>mutate()</code> function to work over more than one column at the same time like this:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="data-wrangling-and-data-summarising.html#cb24-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="data-wrangling-and-data-summarising.html#cb24-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">manufacturer =</span> <span class="fu">str_to_title</span>(manufacturer), <span class="at">model =</span> <span class="fu">str_to_title</span>(model))</span></code></pre></div>
<pre><code>## # A tibble: 234 × 11
##    manufacturer model      displ  year   cyl trans      drv     cty   hwy fl    class  
##    &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
##  1 Audi         A4           1.8  1999     4 auto(l5)   f        18    29 p     compact
##  2 Audi         A4           1.8  1999     4 manual(m5) f        21    29 p     compact
##  3 Audi         A4           2    2008     4 manual(m6) f        20    31 p     compact
##  4 Audi         A4           2    2008     4 auto(av)   f        21    30 p     compact
##  5 Audi         A4           2.8  1999     6 auto(l5)   f        16    26 p     compact
##  6 Audi         A4           2.8  1999     6 manual(m5) f        18    26 p     compact
##  7 Audi         A4           3.1  2008     6 auto(av)   f        18    27 p     compact
##  8 Audi         A4 Quattro   1.8  1999     4 manual(m5) 4        18    26 p     compact
##  9 Audi         A4 Quattro   1.8  1999     4 auto(l5)   4        16    25 p     compact
## 10 Audi         A4 Quattro   2    2008     4 manual(m6) 4        20    28 p     compact
## # ℹ 224 more rows</code></pre>
<p>There are quite a few columns there, so how about we select just the manufacturer, model, year, transmission, and hwy columns:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data-wrangling-and-data-summarising.html#cb26-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="data-wrangling-and-data-summarising.html#cb26-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">manufacturer =</span> <span class="fu">str_to_title</span>(manufacturer), <span class="at">model =</span> <span class="fu">str_to_title</span>(model)) <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="data-wrangling-and-data-summarising.html#cb26-3" tabindex="-1"></a>  <span class="fu">select</span>(manufacturer, model, year, trans, hwy)</span></code></pre></div>
<pre><code>## # A tibble: 234 × 5
##    manufacturer model       year trans        hwy
##    &lt;chr&gt;        &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;      &lt;int&gt;
##  1 Audi         A4          1999 auto(l5)      29
##  2 Audi         A4          1999 manual(m5)    29
##  3 Audi         A4          2008 manual(m6)    31
##  4 Audi         A4          2008 auto(av)      30
##  5 Audi         A4          1999 auto(l5)      26
##  6 Audi         A4          1999 manual(m5)    26
##  7 Audi         A4          2008 auto(av)      27
##  8 Audi         A4 Quattro  1999 manual(m5)    26
##  9 Audi         A4 Quattro  1999 auto(l5)      25
## 10 Audi         A4 Quattro  2008 manual(m6)    28
## # ℹ 224 more rows</code></pre>
</div>
<div id="recoding-variables" class="section level4 unnumbered hasAnchor">
<h4>Recoding variables<a href="data-wrangling-and-data-summarising.html#recoding-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In the real world, data frames do not always arrive on our computer in tidy format. Very often you need to engage in some data tidying before you can do anything useful with them. We’re going to look at an example of how we go from messy data to tidy data.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="data-wrangling-and-data-summarising.html#cb28-1" tabindex="-1"></a>my_messy_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/ajstewartlang/03_data_wrangling/master/data/my_data.csv&quot;</span>)</span></code></pre></div>
<p>We ran a reaction time experiment with 24 participants and 4 conditions - they are numbered 1-4 in our data file.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data-wrangling-and-data-summarising.html#cb29-1" tabindex="-1"></a><span class="fu">head</span>(my_messy_data)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   participant condition    rt
##         &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;
## 1           1         1   879
## 2           1         2  1027
## 3           1         3  1108
## 4           1         4   765
## 5           2         1  1042
## 6           2         2  1050</code></pre>
<p>This is a repeated measures design where we had one factor (Prime Type) with two levels (A vs. B) and a second factor (Target Type) with two levels (A vs. B). We want to recode our data frame so it better matches our experimental design. First we need to recode our 4 conditions like this:</p>
<p>Recode condition columns follows: Condition 1 = Prime A, Target A Condition 2 = Prime A, Target B Condition 3 = Prime B, Target A Condition 4 = Prime B, Target B</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data-wrangling-and-data-summarising.html#cb31-1" tabindex="-1"></a>my_messy_data <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="data-wrangling-and-data-summarising.html#cb31-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">condition =</span> <span class="fu">recode</span>(condition,</span>
<span id="cb31-3"><a href="data-wrangling-and-data-summarising.html#cb31-3" tabindex="-1"></a>                            <span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;PrimeA_TargetA&quot;</span>,</span>
<span id="cb31-4"><a href="data-wrangling-and-data-summarising.html#cb31-4" tabindex="-1"></a>                            <span class="st">&quot;2&quot;</span> <span class="ot">=</span> <span class="st">&quot;PrimeA_TargetB&quot;</span>, </span>
<span id="cb31-5"><a href="data-wrangling-and-data-summarising.html#cb31-5" tabindex="-1"></a>                            <span class="st">&quot;3&quot;</span> <span class="ot">=</span> <span class="st">&quot;PrimeB_TargetA&quot;</span>, </span>
<span id="cb31-6"><a href="data-wrangling-and-data-summarising.html#cb31-6" tabindex="-1"></a>                            <span class="st">&quot;4&quot;</span> <span class="ot">=</span> <span class="st">&quot;PrimeB_TargetB&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-7"><a href="data-wrangling-and-data-summarising.html#cb31-7" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   participant condition         rt
##         &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;
## 1           1 PrimeA_TargetA   879
## 2           1 PrimeA_TargetB  1027
## 3           1 PrimeB_TargetA  1108
## 4           1 PrimeB_TargetB   765
## 5           2 PrimeA_TargetA  1042
## 6           2 PrimeA_TargetB  1050</code></pre>
<p>We now need to separate out our Condition column into two - one for our first factor (Prime), and one for our second factor (Target). The <code>separate()</code> function does just this - when used in conjunction with a piped tibble, it needs to know which column we want to separate, what new columns to create by separating that original column, and on what basis we want to do the separation. In the example below we tell <code>separate()</code> that we want to separate the column labeled <code>condition</code> into two new columns called <code>Prime</code> and <code>Target</code> and we want to do this at any points where a <code>_</code> is present in the column to be separated.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data-wrangling-and-data-summarising.html#cb33-1" tabindex="-1"></a>my_messy_data <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="data-wrangling-and-data-summarising.html#cb33-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">condition =</span> <span class="fu">recode</span>(condition,</span>
<span id="cb33-3"><a href="data-wrangling-and-data-summarising.html#cb33-3" tabindex="-1"></a>                            <span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;PrimeA_TargetA&quot;</span>,</span>
<span id="cb33-4"><a href="data-wrangling-and-data-summarising.html#cb33-4" tabindex="-1"></a>                            <span class="st">&quot;2&quot;</span> <span class="ot">=</span> <span class="st">&quot;PrimeA_TargetB&quot;</span>, </span>
<span id="cb33-5"><a href="data-wrangling-and-data-summarising.html#cb33-5" tabindex="-1"></a>                            <span class="st">&quot;3&quot;</span> <span class="ot">=</span> <span class="st">&quot;PrimeB_TargetA&quot;</span>, </span>
<span id="cb33-6"><a href="data-wrangling-and-data-summarising.html#cb33-6" tabindex="-1"></a>                            <span class="st">&quot;4&quot;</span> <span class="ot">=</span> <span class="st">&quot;PrimeB_TargetB&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb33-7"><a href="data-wrangling-and-data-summarising.html#cb33-7" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> <span class="st">&quot;condition&quot;</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;Prime&quot;</span>, <span class="st">&quot;Target&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 96 × 4
##    participant Prime  Target     rt
##          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;dbl&gt;
##  1           1 PrimeA TargetA   879
##  2           1 PrimeA TargetB  1027
##  3           1 PrimeB TargetA  1108
##  4           1 PrimeB TargetB   765
##  5           2 PrimeA TargetA  1042
##  6           2 PrimeA TargetB  1050
##  7           2 PrimeB TargetA   942
##  8           2 PrimeB TargetB   945
##  9           3 PrimeA TargetA   943
## 10           3 PrimeA TargetB   910
## # ℹ 86 more rows</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data-wrangling-and-data-summarising.html#cb35-1" tabindex="-1"></a>my_messy_data <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="data-wrangling-and-data-summarising.html#cb35-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">condition =</span> <span class="fu">recode</span>(condition,</span>
<span id="cb35-3"><a href="data-wrangling-and-data-summarising.html#cb35-3" tabindex="-1"></a>                            <span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;PrimeA_TargetA&quot;</span>,</span>
<span id="cb35-4"><a href="data-wrangling-and-data-summarising.html#cb35-4" tabindex="-1"></a>                            <span class="st">&quot;2&quot;</span> <span class="ot">=</span> <span class="st">&quot;PrimeA_TargetB&quot;</span>, </span>
<span id="cb35-5"><a href="data-wrangling-and-data-summarising.html#cb35-5" tabindex="-1"></a>                            <span class="st">&quot;3&quot;</span> <span class="ot">=</span> <span class="st">&quot;PrimeB_TargetA&quot;</span>, </span>
<span id="cb35-6"><a href="data-wrangling-and-data-summarising.html#cb35-6" tabindex="-1"></a>                            <span class="st">&quot;4&quot;</span> <span class="ot">=</span> <span class="st">&quot;PrimeB_TargetB&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb35-7"><a href="data-wrangling-and-data-summarising.html#cb35-7" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> <span class="st">&quot;condition&quot;</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;Prime&quot;</span>, <span class="st">&quot;Target&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-8"><a href="data-wrangling-and-data-summarising.html#cb35-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Prime =</span> <span class="fu">factor</span>(Prime), <span class="at">Target =</span> <span class="fu">factor</span>(Target))</span></code></pre></div>
<pre><code>## # A tibble: 96 × 4
##    participant Prime  Target     rt
##          &lt;dbl&gt; &lt;fct&gt;  &lt;fct&gt;   &lt;dbl&gt;
##  1           1 PrimeA TargetA   879
##  2           1 PrimeA TargetB  1027
##  3           1 PrimeB TargetA  1108
##  4           1 PrimeB TargetB   765
##  5           2 PrimeA TargetA  1042
##  6           2 PrimeA TargetB  1050
##  7           2 PrimeB TargetA   942
##  8           2 PrimeB TargetB   945
##  9           3 PrimeA TargetA   943
## 10           3 PrimeA TargetB   910
## # ℹ 86 more rows</code></pre>
</div>
<div id="the-pivot-functions" class="section level4 unnumbered hasAnchor">
<h4>The pivot functions<a href="data-wrangling-and-data-summarising.html#the-pivot-functions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Most of the analysis we will conduct in R requires our data to be in tidy, or long, format. In such data sets, one row corresponds to one observation. In the real world, data are rarely in the right format for analysis. In R, the <code>pivot_wider()</code> and <code>pivot_longer()</code> functions are designed to reshape our data files. First, let’s load a datafile that is in wide format (i.e., multiple observations per row). It is from an experiment where we had four conditions (labelled Condition1, Condition2, Condition3, and Condition4). In addition to there being a column for each of the 4 conditions, we also have a column corresponding to participant ID. Each cell in the data set corresponds to a reaction time (measured in milliseconds).</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="data-wrangling-and-data-summarising.html#cb37-1" tabindex="-1"></a>my_wide_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/ajstewartlang/03_data_wrangling/master/data/my_wide_data.csv&quot;</span>)</span></code></pre></div>
<div id="the-pivot_longer-function" class="section level5 unnumbered hasAnchor">
<h5>The <code>pivot_longer()</code> function<a href="data-wrangling-and-data-summarising.html#the-pivot_longer-function" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="data-wrangling-and-data-summarising.html#cb38-1" tabindex="-1"></a><span class="fu">head</span>(my_wide_data)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##      ID Condition1 Condition2 Condition3 Condition4
##   &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
## 1     1        487        492        499        488
## 2     2        502        494        517        508
## 3     3        510        483        488        509
## 4     4        476        488        513        521
## 5     5        504        478        513        504
## 6     6        505        486        503        495</code></pre>
<p>So, we can see the data file is in wide format. We want to reshape it to long format. We can do that using the <code>pivot_longer()</code> function.</p>
<p>Minimally, we need to specify the data frame that we want to reshape, the columns that we want to ‘pivot’ into longer format, the name of the new column that we are creating, and the name of the column that will hold the values of our reshaped data frame. We are going to map the output to a variable I’m calling <code>my_longer_data</code>.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="data-wrangling-and-data-summarising.html#cb40-1" tabindex="-1"></a>my_longer_data <span class="ot">&lt;-</span> my_wide_data <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="data-wrangling-and-data-summarising.html#cb40-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(Condition1, Condition2, Condition3, Condition4), </span>
<span id="cb40-3"><a href="data-wrangling-and-data-summarising.html#cb40-3" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;Condition&quot;</span>, </span>
<span id="cb40-4"><a href="data-wrangling-and-data-summarising.html#cb40-4" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;RT&quot;</span>)</span></code></pre></div>
<p>Now let’s have a look at what our reshaped data frame looks like.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="data-wrangling-and-data-summarising.html#cb41-1" tabindex="-1"></a><span class="fu">head</span>(my_longer_data)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##      ID Condition     RT
##   &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;
## 1     1 Condition1   487
## 2     1 Condition2   492
## 3     1 Condition3   499
## 4     1 Condition4   488
## 5     2 Condition1   502
## 6     2 Condition2   494</code></pre>
<p>So you can see our data are now in long - or tidy - format with one observation per row. Note that our <code>Condition</code> column isn’t coded as a factor. It’s important that our data set reflects the structure of our experiment so let’s convert that column to a factor - note that in the following code we are now ‘saving’ the change as we are not mapping the output onto a variable name.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="data-wrangling-and-data-summarising.html#cb43-1" tabindex="-1"></a>my_longer_data <span class="sc">%&gt;%</span></span>
<span id="cb43-2"><a href="data-wrangling-and-data-summarising.html#cb43-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Condition =</span> <span class="fu">factor</span>(Condition)) <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="data-wrangling-and-data-summarising.html#cb43-3" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##      ID Condition     RT
##   &lt;dbl&gt; &lt;fct&gt;      &lt;dbl&gt;
## 1     1 Condition1   487
## 2     1 Condition2   492
## 3     1 Condition3   499
## 4     1 Condition4   488
## 5     2 Condition1   502
## 6     2 Condition2   494</code></pre>
</div>
<div id="the-pivot_wider-function" class="section level5 unnumbered hasAnchor">
<h5>The <code>pivot_wider()</code> function<a href="data-wrangling-and-data-summarising.html#the-pivot_wider-function" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>We can use the <code>pivot_wider()</code> function to reshape a long data frame so that it goes from long to wide format. It works similarly to <code>pivot_longer()</code>. Let’s take our new, long, data frame and turn it back into wide format. With <code>pivot_wider()</code> we minimally need to specify the data frame that we want to reshape, and a pair or arguments (names_from and values_from) that describe from which column to get the name of the output column, and from which column to get the cell values.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="data-wrangling-and-data-summarising.html#cb45-1" tabindex="-1"></a>my_wider_data <span class="ot">&lt;-</span> my_longer_data <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="data-wrangling-and-data-summarising.html#cb45-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Condition&quot;</span>, </span>
<span id="cb45-3"><a href="data-wrangling-and-data-summarising.html#cb45-3" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="st">&quot;RT&quot;</span>)</span></code></pre></div>
<p>We can check that our data set is back in wide format.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="data-wrangling-and-data-summarising.html#cb46-1" tabindex="-1"></a><span class="fu">head</span>(my_wider_data)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##      ID Condition1 Condition2 Condition3 Condition4
##   &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
## 1     1        487        492        499        488
## 2     2        502        494        517        508
## 3     3        510        483        488        509
## 4     4        476        488        513        521
## 5     5        504        478        513        504
## 6     6        505        486        503        495</code></pre>
</div>
</div>
</div>
<div id="joining-two-datasets" class="section level3 hasAnchor" number="3.1.7">
<h3><span class="header-section-number">3.1.7</span> Joining Two Datasets<a href="data-wrangling-and-data-summarising.html#joining-two-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes you might need to combine two datasets. For example, you might have one dataset that contains reading time data (like the one above) and another than contains individual difference measures for the participants in the first dataset. How would we go about combining these two datasets so that we end up with one that includes both the reading time data <em>and</em> the individual difference measures (that perhaps we want to covary out later)? Luckily, the <code>dplyr</code> package contains a number of join functions that allows you to join together different tibbles. First, let’s load the data that contains the individual different measures.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="data-wrangling-and-data-summarising.html#cb48-1" tabindex="-1"></a>individual_diffs <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/ajstewartlang/03_data_wrangling/master/data/individual_diffs.csv&quot;</span>)</span></code></pre></div>
<p>Let’s look at the first few rows of the individual differences data. This dataset contains the ID numbers of our participants plus measures of IQ (the iq column) and Working Memory (the wm column).</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data-wrangling-and-data-summarising.html#cb49-1" tabindex="-1"></a><span class="fu">head</span>(individual_diffs)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##      ID    iq    wm
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1   100     9
## 2     2   108     8
## 3     3   116     9
## 4     4    95     9
## 5     5    83    11
## 6     6    73    10</code></pre>
<p>We want to combine this dataset with our reading time dataset from above <code>my_longer_data</code> which looks like this:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data-wrangling-and-data-summarising.html#cb51-1" tabindex="-1"></a><span class="fu">head</span>(my_longer_data)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##      ID Condition     RT
##   &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;
## 1     1 Condition1   487
## 2     1 Condition2   492
## 3     1 Condition3   499
## 4     1 Condition4   488
## 5     2 Condition1   502
## 6     2 Condition2   494</code></pre>
<div id="full-join" class="section level4 unnumbered hasAnchor">
<h4>Full Join<a href="data-wrangling-and-data-summarising.html#full-join" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can combine using one of the join functions. There are a variety of options including <code>full_join()</code> which includes all of the rows from both tibbles that we want to join. Other options include <code>inner_join()</code> which keeps only the rows in tibble one that have a matching key in tibble 2, as well as <code>left_join()</code> and <code>right_join()</code>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="data-wrangling-and-data-summarising.html#cb53-1" tabindex="-1"></a>combined_data <span class="ot">&lt;-</span> <span class="fu">full_join</span>(my_longer_data, individual_diffs, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)</span></code></pre></div>
<p>We now see that our dataset are combined as we’d expect.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="data-wrangling-and-data-summarising.html#cb54-1" tabindex="-1"></a>combined_data</span></code></pre></div>
<pre><code>## # A tibble: 128 × 5
##       ID Condition     RT    iq    wm
##    &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1     1 Condition1   487   100     9
##  2     1 Condition2   492   100     9
##  3     1 Condition3   499   100     9
##  4     1 Condition4   488   100     9
##  5     2 Condition1   502   108     8
##  6     2 Condition2   494   108     8
##  7     2 Condition3   517   108     8
##  8     2 Condition4   508   108     8
##  9     3 Condition1   510   116     9
## 10     3 Condition2   483   116     9
## # ℹ 118 more rows</code></pre>
</div>
<div id="left-join" class="section level4 unnumbered hasAnchor">
<h4>Left Join<a href="data-wrangling-and-data-summarising.html#left-join" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Of course, you may be thinking that we could just do a quick bit of Excel cut and paste of the columns we want from one dataset to the other. But what about the case where our individual differences file contains 10,000 participant IDs (in random order) and we’re only interested in combining the two datasets where there is a match?</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="data-wrangling-and-data-summarising.html#cb56-1" tabindex="-1"></a>large_ind_diffs <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/ajstewartlang/03_data_wrangling/master/data/large_ind_diffs.csv&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="data-wrangling-and-data-summarising.html#cb57-1" tabindex="-1"></a><span class="fu">head</span>(large_ind_diffs)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##      ID    iq    wm
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  6057    93     7
## 2  2723    86     7
## 3  1088    97     9
## 4  8687    87     8
## 5  4223    77    11
## 6   369    95     9</code></pre>
<p>We can actually use another join function (<code>left_join()</code>) to combine these two datasets, but only where there is a match of ID with the first of the two datasets (<code>my_longer_data</code>) in the function call.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="data-wrangling-and-data-summarising.html#cb59-1" tabindex="-1"></a><span class="fu">left_join</span>(my_longer_data, large_ind_diffs, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 128 × 5
##       ID Condition     RT    iq    wm
##    &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1     1 Condition1   487   100     9
##  2     1 Condition2   492   100     9
##  3     1 Condition3   499   100     9
##  4     1 Condition4   488   100     9
##  5     2 Condition1   502   108     8
##  6     2 Condition2   494   108     8
##  7     2 Condition3   517   108     8
##  8     2 Condition4   508   108     8
##  9     3 Condition1   510   116     9
## 10     3 Condition2   483   116     9
## # ℹ 118 more rows</code></pre>
</div>
</div>
<div id="your-challenge-complete-this-before-the-in-person-session" class="section level3 hasAnchor" number="3.1.8">
<h3><span class="header-section-number">3.1.8</span> Your challenge (complete this before the in-person session)<a href="data-wrangling-and-data-summarising.html#your-challenge-complete-this-before-the-in-person-session" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Have a go at recreating the join above using RStudio Desktop. Use <code>read_csv</code> to create the <code>my_wide_data</code> tibble (as shown above) and use <code>pivot_longer</code> to make my <code>my_longer_data</code>. Then use <code>read_csv</code> to create <code>large_ind_diffs</code> and use <code>left_join</code> to combine it with <code>my_longer_data</code></p>
</div>
</div>
<div id="summarising-your-data" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Summarising your data<a href="data-wrangling-and-data-summarising.html#summarising-your-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We’ll be using the <code>mpg</code> dataset that is built into the <code>tidyverse</code> for this workshop. This dataset contains information about cars (such as engine size, fuel economy) produced by a number of different manufacturers. Once a dataset has been tidied, often one of the first things we want to do is generate summary statistics, e.g. the means and standard deviations for one of our variables grouped by car manufacturer. Have a look at the following video where I walk you through this worksheet. Then I want you to work through the content by writing (and running) the script on your own machine.</p>
<p>  </p>
<center>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Y6zXyevC52g?si=uqyrQ0xPx7tQ0eV1" frameborder="0" allowfullscreen>
</iframe>
</center>
<p>  </p>
<p>Remember to set up a .Rproj file for this workshop before continuing. In your script, you’ll first need to load the tidyverse.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="data-wrangling-and-data-summarising.html#cb61-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<div id="using-group_by-and-summarise" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Using <code>group_by()</code> and <code>summarise()</code><a href="data-wrangling-and-data-summarising.html#using-group_by-and-summarise" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We are going to use the <code>group_by()</code> function to group the dataset, and then the <code>summarise()</code> function to calculate the mean and sd of the <code>hwy</code> variable. The <code>summarise()</code> function can take a lot of different functions to give us summary statistics. To read more about the different options, type <code>?summarise</code> in the Console window. Commonly used ones are <code>mean()</code>, <code>median()</code>, <code>sd()</code>.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="data-wrangling-and-data-summarising.html#cb62-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb62-2"><a href="data-wrangling-and-data-summarising.html#cb62-2" tabindex="-1"></a>  <span class="fu">group_by</span>(manufacturer) <span class="sc">%&gt;%</span></span>
<span id="cb62-3"><a href="data-wrangling-and-data-summarising.html#cb62-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_hwy =</span> <span class="fu">mean</span>(hwy), <span class="at">sd_hwy =</span> <span class="fu">sd</span>(hwy), <span class="at">number =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 15 × 4
##    manufacturer mean_hwy sd_hwy number
##    &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;
##  1 audi             26.4   2.18     18
##  2 chevrolet        21.9   5.11     19
##  3 dodge            17.9   3.57     37
##  4 ford             19.4   3.33     25
##  5 honda            32.6   2.55      9
##  6 hyundai          26.9   2.18     14
##  7 jeep             17.6   3.25      8
##  8 land rover       16.5   1.73      4
##  9 lincoln          17     1         3
## 10 mercury          18     1.15      4
## 11 nissan           24.6   5.09     13
## 12 pontiac          26.4   1.14      5
## 13 subaru           25.6   1.16     14
## 14 toyota           24.9   6.17     34
## 15 volkswagen       29.2   5.32     27</code></pre>
<p>Note that this output is currently ordered alphabetically by the first column <code>manufacturer</code>. What if we wanted to order this out by mean highway fuel economy highest (best) to lowest (worst)? We can use the arrange function.</p>
<div id="re-ordering-the-output-with-arrange" class="section level4 unnumbered hasAnchor">
<h4>Re-ordering the output with <code>arrange()</code><a href="data-wrangling-and-data-summarising.html#re-ordering-the-output-with-arrange" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="data-wrangling-and-data-summarising.html#cb64-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb64-2"><a href="data-wrangling-and-data-summarising.html#cb64-2" tabindex="-1"></a>  <span class="fu">group_by</span>(manufacturer) <span class="sc">%&gt;%</span></span>
<span id="cb64-3"><a href="data-wrangling-and-data-summarising.html#cb64-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_hwy =</span> <span class="fu">mean</span>(hwy), <span class="at">sd_hwy =</span> <span class="fu">sd</span>(hwy), <span class="at">number =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb64-4"><a href="data-wrangling-and-data-summarising.html#cb64-4" tabindex="-1"></a>  <span class="fu">arrange</span>(mean_hwy)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 4
##    manufacturer mean_hwy sd_hwy number
##    &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;
##  1 land rover       16.5   1.73      4
##  2 lincoln          17     1         3
##  3 jeep             17.6   3.25      8
##  4 dodge            17.9   3.57     37
##  5 mercury          18     1.15      4
##  6 ford             19.4   3.33     25
##  7 chevrolet        21.9   5.11     19
##  8 nissan           24.6   5.09     13
##  9 toyota           24.9   6.17     34
## 10 subaru           25.6   1.16     14
## 11 pontiac          26.4   1.14      5
## 12 audi             26.4   2.18     18
## 13 hyundai          26.9   2.18     14
## 14 volkswagen       29.2   5.32     27
## 15 honda            32.6   2.55      9</code></pre>
<p>Hmm, so that isn’t what we want - this is going from lowest to highest which is the default in R. We can change that by putting a <code>-</code> sign in from of the parameter we can to order by.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="data-wrangling-and-data-summarising.html#cb66-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb66-2"><a href="data-wrangling-and-data-summarising.html#cb66-2" tabindex="-1"></a>  <span class="fu">group_by</span>(manufacturer) <span class="sc">%&gt;%</span></span>
<span id="cb66-3"><a href="data-wrangling-and-data-summarising.html#cb66-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_hwy =</span> <span class="fu">mean</span>(hwy), <span class="at">sd_hwy =</span> <span class="fu">sd</span>(hwy), <span class="at">number =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb66-4"><a href="data-wrangling-and-data-summarising.html#cb66-4" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>mean_hwy)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 4
##    manufacturer mean_hwy sd_hwy number
##    &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;
##  1 honda            32.6   2.55      9
##  2 volkswagen       29.2   5.32     27
##  3 hyundai          26.9   2.18     14
##  4 audi             26.4   2.18     18
##  5 pontiac          26.4   1.14      5
##  6 subaru           25.6   1.16     14
##  7 toyota           24.9   6.17     34
##  8 nissan           24.6   5.09     13
##  9 chevrolet        21.9   5.11     19
## 10 ford             19.4   3.33     25
## 11 mercury          18     1.15      4
## 12 dodge            17.9   3.57     37
## 13 jeep             17.6   3.25      8
## 14 lincoln          17     1         3
## 15 land rover       16.5   1.73      4</code></pre>
<p>This is looking better.</p>
</div>
<div id="the-summarise_at-variant" class="section level4 unnumbered hasAnchor">
<h4>The <code>summarise_at()</code> variant<a href="data-wrangling-and-data-summarising.html#the-summarise_at-variant" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As well as using <code>summarise()</code>, you can use related functions such as <code>summarise_at()</code>. This is a scoped version of the <code>summarise()</code> function that can be applied across multiple columns. Note, when using <code>summarise_at()</code> you need to put the columns you want to summarise over in quotes. You also need to provide the summary function - in this case <code>mean</code>. Finally, in case our dataset contains any missing values (indicated by <code>NA</code>), we set the parameter <code>na.rm = TRUE</code>. This will ensure that missing data points are removed before the operation is applied. If we had missing data, but didn’t tell R what we wanted to do with it, it would have thrown an error.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="data-wrangling-and-data-summarising.html#cb68-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb68-2"><a href="data-wrangling-and-data-summarising.html#cb68-2" tabindex="-1"></a>  <span class="fu">group_by</span>(manufacturer) <span class="sc">%&gt;%</span></span>
<span id="cb68-3"><a href="data-wrangling-and-data-summarising.html#cb68-3" tabindex="-1"></a>  <span class="fu">summarise_at</span>(<span class="fu">c</span>(<span class="st">&quot;displ&quot;</span>, <span class="st">&quot;cty&quot;</span>, <span class="st">&quot;hwy&quot;</span>), mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 4
##    manufacturer displ   cty   hwy
##    &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 audi          2.54  17.6  26.4
##  2 chevrolet     5.06  15    21.9
##  3 dodge         4.38  13.1  17.9
##  4 ford          4.54  14    19.4
##  5 honda         1.71  24.4  32.6
##  6 hyundai       2.43  18.6  26.9
##  7 jeep          4.58  13.5  17.6
##  8 land rover    4.3   11.5  16.5
##  9 lincoln       5.4   11.3  17  
## 10 mercury       4.4   13.2  18  
## 11 nissan        3.27  18.1  24.6
## 12 pontiac       3.96  17    26.4
## 13 subaru        2.46  19.3  25.6
## 14 toyota        2.95  18.5  24.9
## 15 volkswagen    2.26  20.9  29.2</code></pre>
</div>
<div id="the-summarise_if-variant" class="section level4 unnumbered hasAnchor">
<h4>The <code>summarise_if()</code> variant<a href="data-wrangling-and-data-summarising.html#the-summarise_if-variant" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Imagine we had a really big dataset and wanted to summarise all columns that were of a certain type. We can use the <code>summarise_if()</code> function to work out the mean for each of our car manufactures as follows:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="data-wrangling-and-data-summarising.html#cb70-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb70-2"><a href="data-wrangling-and-data-summarising.html#cb70-2" tabindex="-1"></a>  <span class="fu">group_by</span>(manufacturer) <span class="sc">%&gt;%</span></span>
<span id="cb70-3"><a href="data-wrangling-and-data-summarising.html#cb70-3" tabindex="-1"></a>  <span class="fu">summarise_if</span>(is.numeric, mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 6
##    manufacturer displ  year   cyl   cty   hwy
##    &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 audi          2.54 2004.  5.22  17.6  26.4
##  2 chevrolet     5.06 2005.  7.26  15    21.9
##  3 dodge         4.38 2004.  7.08  13.1  17.9
##  4 ford          4.54 2003.  7.2   14    19.4
##  5 honda         1.71 2003   4     24.4  32.6
##  6 hyundai       2.43 2004.  4.86  18.6  26.9
##  7 jeep          4.58 2006.  7.25  13.5  17.6
##  8 land rover    4.3  2004.  8     11.5  16.5
##  9 lincoln       5.4  2002   8     11.3  17  
## 10 mercury       4.4  2004.  7     13.2  18  
## 11 nissan        3.27 2004.  5.54  18.1  24.6
## 12 pontiac       3.96 2003.  6.4   17    26.4
## 13 subaru        2.46 2004.  4     19.3  25.6
## 14 toyota        2.95 2003.  5.12  18.5  24.9
## 15 volkswagen    2.26 2003.  4.59  20.9  29.2</code></pre>
<p>The first parameter in <code>summarise_if()</code> is the logical test applied to each column - in this case, if a column is numeric (i.e., a number) - then the test evaluates to TRUE and the second function, <code>mean</code>, is applied. Again, we tell R to ignore missing (<code>NA</code>) data values with the <code>na.rm = TRUE</code> parameter.</p>
<p>R functions differ in terms of what arguments they take. I often forget them - if you start typing a function name, you’ll get a little bubble above where you’re typing to remind you what parameters are needed. And if you can’t remember the details, you can just type <code>help(function_name)</code> or <code>?function_name</code> in the console for any function that you need help with. A lot of data analysis with R (or Python or any other language really) involves a fair bit of Googling. This is normal. There are some things I can never remember and am always having to look up!</p>
</div>
</div>
<div id="adding-columns-using-mutate" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Adding columns using <code>mutate()</code><a href="data-wrangling-and-data-summarising.html#adding-columns-using-mutate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can add a new column that I’m calling <code>mean_hwy</code> using the <code>mutate()</code> function like this.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="data-wrangling-and-data-summarising.html#cb72-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb72-2"><a href="data-wrangling-and-data-summarising.html#cb72-2" tabindex="-1"></a>  <span class="fu">group_by</span>(manufacturer) <span class="sc">%&gt;%</span></span>
<span id="cb72-3"><a href="data-wrangling-and-data-summarising.html#cb72-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mean_hwy =</span> <span class="fu">mean</span>(hwy), <span class="at">sd_hwy =</span> <span class="fu">sd</span>(hwy))</span></code></pre></div>
<pre><code>## # A tibble: 234 × 13
## # Groups:   manufacturer [15]
##    manufacturer model      displ  year   cyl trans      drv     cty   hwy fl    class   mean_hwy sd_hwy
##    &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;
##  1 audi         a4           1.8  1999     4 auto(l5)   f        18    29 p     compact     26.4   2.18
##  2 audi         a4           1.8  1999     4 manual(m5) f        21    29 p     compact     26.4   2.18
##  3 audi         a4           2    2008     4 manual(m6) f        20    31 p     compact     26.4   2.18
##  4 audi         a4           2    2008     4 auto(av)   f        21    30 p     compact     26.4   2.18
##  5 audi         a4           2.8  1999     6 auto(l5)   f        16    26 p     compact     26.4   2.18
##  6 audi         a4           2.8  1999     6 manual(m5) f        18    26 p     compact     26.4   2.18
##  7 audi         a4           3.1  2008     6 auto(av)   f        18    27 p     compact     26.4   2.18
##  8 audi         a4 quattro   1.8  1999     4 manual(m5) 4        18    26 p     compact     26.4   2.18
##  9 audi         a4 quattro   1.8  1999     4 auto(l5)   4        16    25 p     compact     26.4   2.18
## 10 audi         a4 quattro   2    2008     4 manual(m6) 4        20    28 p     compact     26.4   2.18
## # ℹ 224 more rows</code></pre>
<p>We have too many columns to display on this page so we can drop a couple by using the <code>select()</code> function slightly differently. By putting a <code>-</code> sign in front of a column names in <code>select()</code> we end up dropping it.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="data-wrangling-and-data-summarising.html#cb74-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb74-2"><a href="data-wrangling-and-data-summarising.html#cb74-2" tabindex="-1"></a>  <span class="fu">group_by</span>(manufacturer) <span class="sc">%&gt;%</span></span>
<span id="cb74-3"><a href="data-wrangling-and-data-summarising.html#cb74-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mean_hwy =</span> <span class="fu">mean</span>(hwy), <span class="at">sd_hwy =</span> <span class="fu">sd</span>(hwy)) <span class="sc">%&gt;%</span></span>
<span id="cb74-4"><a href="data-wrangling-and-data-summarising.html#cb74-4" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>class, <span class="sc">-</span>trans)</span></code></pre></div>
<pre><code>## # A tibble: 234 × 11
## # Groups:   manufacturer [15]
##    manufacturer model      displ  year   cyl drv     cty   hwy fl    mean_hwy sd_hwy
##    &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;
##  1 audi         a4           1.8  1999     4 f        18    29 p         26.4   2.18
##  2 audi         a4           1.8  1999     4 f        21    29 p         26.4   2.18
##  3 audi         a4           2    2008     4 f        20    31 p         26.4   2.18
##  4 audi         a4           2    2008     4 f        21    30 p         26.4   2.18
##  5 audi         a4           2.8  1999     6 f        16    26 p         26.4   2.18
##  6 audi         a4           2.8  1999     6 f        18    26 p         26.4   2.18
##  7 audi         a4           3.1  2008     6 f        18    27 p         26.4   2.18
##  8 audi         a4 quattro   1.8  1999     4 4        18    26 p         26.4   2.18
##  9 audi         a4 quattro   1.8  1999     4 4        16    25 p         26.4   2.18
## 10 audi         a4 quattro   2    2008     4 4        20    28 p         26.4   2.18
## # ℹ 224 more rows</code></pre>
<p>Note that this doesn’t change the <code>mpg</code> dataset permanently - the changes won’t be saved unless we map the output of this code onto a new variable. Below I am doing this by using the assignment operator <code>&lt;-</code> to map it onto a new variable I’m calling <code>mpg_with_mean</code>. Note that we remove the grouping at the end as we don’t want our grouping rule to remain in our new data frame.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="data-wrangling-and-data-summarising.html#cb76-1" tabindex="-1"></a>mpg_with_mean <span class="ot">&lt;-</span> mpg <span class="sc">%&gt;%</span> </span>
<span id="cb76-2"><a href="data-wrangling-and-data-summarising.html#cb76-2" tabindex="-1"></a>  <span class="fu">group_by</span>(manufacturer) <span class="sc">%&gt;%</span></span>
<span id="cb76-3"><a href="data-wrangling-and-data-summarising.html#cb76-3" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">mean_hwy =</span> <span class="fu">mean</span>(hwy), <span class="at">sd_hyw =</span> <span class="fu">sd</span>(hwy)) <span class="sc">%&gt;%</span></span>
<span id="cb76-4"><a href="data-wrangling-and-data-summarising.html#cb76-4" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb76-5"><a href="data-wrangling-and-data-summarising.html#cb76-5" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>class, <span class="sc">-</span>trans) </span></code></pre></div>
<p>We can then inspect this new variable using <code>head()</code> and <code>str()</code>.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="data-wrangling-and-data-summarising.html#cb77-1" tabindex="-1"></a><span class="fu">head</span>(mpg_with_mean)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 11
##   manufacturer model displ  year   cyl drv     cty   hwy fl    mean_hwy sd_hyw
##   &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;
## 1 audi         a4      1.8  1999     4 f        18    29 p         26.4   2.18
## 2 audi         a4      1.8  1999     4 f        21    29 p         26.4   2.18
## 3 audi         a4      2    2008     4 f        20    31 p         26.4   2.18
## 4 audi         a4      2    2008     4 f        21    30 p         26.4   2.18
## 5 audi         a4      2.8  1999     6 f        16    26 p         26.4   2.18
## 6 audi         a4      2.8  1999     6 f        18    26 p         26.4   2.18</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="data-wrangling-and-data-summarising.html#cb79-1" tabindex="-1"></a><span class="fu">str</span>(mpg_with_mean)</span></code></pre></div>
<pre><code>## tibble [234 × 11] (S3: tbl_df/tbl/data.frame)
##  $ manufacturer: chr [1:234] &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; ...
##  $ model       : chr [1:234] &quot;a4&quot; &quot;a4&quot; &quot;a4&quot; &quot;a4&quot; ...
##  $ displ       : num [1:234] 1.8 1.8 2 2 2.8 2.8 3.1 1.8 1.8 2 ...
##  $ year        : int [1:234] 1999 1999 2008 2008 1999 1999 2008 1999 1999 2008 ...
##  $ cyl         : int [1:234] 4 4 4 4 6 6 6 4 4 4 ...
##  $ drv         : chr [1:234] &quot;f&quot; &quot;f&quot; &quot;f&quot; &quot;f&quot; ...
##  $ cty         : int [1:234] 18 21 20 21 16 18 18 18 16 20 ...
##  $ hwy         : int [1:234] 29 29 31 30 26 26 27 26 25 28 ...
##  $ fl          : chr [1:234] &quot;p&quot; &quot;p&quot; &quot;p&quot; &quot;p&quot; ...
##  $ mean_hwy    : num [1:234] 26.4 26.4 26.4 26.4 26.4 ...
##  $ sd_hyw      : num [1:234] 2.18 2.18 2.18 2.18 2.18 ...</code></pre>
</div>
<div id="your-challenge-do-this-during-the-in-person-session" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Your challenge (do this during the in-person session)<a href="data-wrangling-and-data-summarising.html#your-challenge-do-this-during-the-in-person-session" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>Tidyverse</code> has a number of other built-in data sets. Another one is the <code>starwars</code> data set. You can have a look at it by typing <code>starwars</code> or by typing <code>view(starwars)</code>. This second option will open the data set in a new window. Have a go playing around with it. Work out the mean height of humans in the Star Wars universe. There might be some missing data (indicated by <code>NA</code>). You can use the <code>na.rm = TRUE</code> parameter in your <code>summarise()</code> function to ignore these values when generating your summary statistics.</p>
<p>Another way to filter out <code>NA</code> values is to use the <code>filter()</code> function in your pipeline. The function <code>is.na()</code> returns a logical value of TRUE of FALSE. The operator <code>!</code> means NOT, so the expression <code>!is.na(height)</code> will return TRUE when the height value is present, and FALSE if absent. By combining this with <code>filter()</code> we have the line <code>filter(!is.na(height))</code> which will filter only the cases where we have height data (i.e., <code>!is.na(height)</code> is TRUE). So your code might look like this:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="data-wrangling-and-data-summarising.html#cb81-1" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb81-2"><a href="data-wrangling-and-data-summarising.html#cb81-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(height)) <span class="sc">%&gt;%</span></span>
<span id="cb81-3"><a href="data-wrangling-and-data-summarising.html#cb81-3" tabindex="-1"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">&quot;Human&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb81-4"><a href="data-wrangling-and-data-summarising.html#cb81-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_height =</span> <span class="fu">mean</span>(height))</span></code></pre></div>
<p>Replace the word <code>mean</code> in the <code>summarise()</code> line with <code>median</code>. What other things can you replace it with? Hint: type <code>?summarise</code> in the console. What other summary information can you extract from this dataset?</p>
<center>
<strong>End of workshop 3 materials</strong>
</center>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-and-rstudio.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-visualisation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
